{% if MCHAT_PAGE %}
	{% INCLUDECSS '@kasimi_mchatgoogletranslate/common.css' %}
	<script>
		var mChatGoogleTranslateInit = function() {
			new google.translate.SectionalElement({
				sectionalNodeClassName: 'goog-trans-section',
				controlNodeClassName: 'goog-trans-control'
			}, 'google_sectional_element');
		};
		var mChatGoogleTranslateUpdate = function() {
			var scriptUrl = '//translate.google.com/translate_a/element.js?cb=mChatGoogleTranslateInit&ug=section&hl=en';
			jQuery.getScript(scriptUrl);
		};
		jQuery(mChat).on({
			mchat_response_handle_data_after: function(e, json) {
				if (json.add) {
					mChatGoogleTranslateUpdate();
				}
			},
			mchat_edit_message_before: function() {
				setTimeout(mChatGoogleTranslateUpdate, 500);
			}
		});
		mChatGoogleTranslateUpdate();
	</script>
{% endif %}
